<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSSTuring: Rule 110 Automaton</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/grid.css">
    <link rel="stylesheet" href="styles/controls.css">
    <link rel="stylesheet" href="styles/themes.css">
    <link rel="stylesheet" href="styles/effects.css">
    <link rel="stylesheet" href="styles/animations.css">
    <link rel="stylesheet" href="styles/modal.css">
    <!-- Generated styles will be injected here -->
    <style id="logic-styles"></style>
</head>

<body>
    <div class="app-container">
        <header>
            <h1>CSSTuring</h1>
            <p>Rule 110 Cellular Automaton via CSS Selectors</p>
        </header>

        <div class="controls">
            <div class="control-group">
                <button id="randomize-btn">Randomize</button>
                <button id="clear-btn">Clear</button>
            </div>

            <div class="control-group">
                <select id="preset-select">
                    <option value="" disabled selected>Load Preset...</option>
                </select>
                <select id="theme-select">
                    <option value="neon" selected>Theme: Neon</option>
                </select>
            </div>

            <div class="info">
                <span>Cells: <span id="cell-count">0</span></span>
                <span>CSS Rules: <span id="rule-count">0</span></span>
            </div>
        </div>

        <div class="simulation-container">
            <!-- The Tape (Row 0 Inputs) -->
            <div class="tape" id="tape-container">
                <!-- Checkboxes injected by JS -->
            </div>

            <!-- The Grid (Rows 1..N) -->
            <div class="grid" id="grid-container">
                <!-- Rows and Cells injected by JS -->
            </div>
        </div>

        <footer>
            <div class="legend">
                <span class="legend-item"><span class="swatch active"></span> Active (1)</span>
                <span class="legend-item"><span class="swatch inactive"></span> Inactive (0)</span>
            </div>
            <div class="footer-controls">
                <button id="help-btn">What is this?</button>
                <button id="export-btn">Export Image</button>
            </div>
        </footer>
    </div>

    <!-- Help Modal -->
    <div class="modal-overlay" id="help-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>About CSSTuring</h2>
                <button class="close-btn" id="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <h3>The Concept</h3>
                <p>CSSTuring demonstrates that <strong>Cascading Style Sheets</strong> are powerful enough to simulate
                    complex computational systems. This project implements <strong>Rule 110</strong>, a cellular
                    automaton proven to be Turing Complete.</p>

                <h3>How It Works</h3>
                <p>Normally, cellular automata are simulated with JavaScript arrays. Here, we use pure CSS:</p>
                <ul>
                    <li>The top row acts as the inputs (checkboxes).</li>
                    <li>Every cell in the grid calculates its state based on the input pattern.</li>
                    <li>We use the <strong>General Sibling Combinator (~)</strong> to target specific cells based on the
                        combination of checked inputs.</li>
                    <li>No JavaScript runs during the simulationâ€”updates are instantaneous via the browser's style
                        engine.</li>
                </ul>

                <h3>Rule 110</h3>
                <p>Rule 110 is interesting because it exists on the edge of chaos. It supports stable periodic
                    structures (gliders) and chaotic behavior, capable of universal computation.</p>

                <h3>Limitations</h3>
                <p>Due to the exponential growth of boolean logic expressions, CSS-only computation is limited to a
                    small grid depth before the selector count (and browser memory) explodes. This demo creates a window
                    into that computational universe.</p>
            </div>
            <div class="modal-footer">
                Built by Antigravity
            </div>
        </div>
    </div>

    <script type="module" src="scripts/setup.js"></script>
    <script type="module" src="scripts/ui.js"></script>
</body>

</html>